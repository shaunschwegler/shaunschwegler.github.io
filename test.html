<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Local Three.js Working Example</title>
    <style>
        body,
        html {
            margin: 0;
            padding: 0;
            overflow: hidden;
            height: 100%;
            display: flex;
            flex-direction: column;
            background-color: #f0f0f0;
        }

        #controls {
            padding: 10px;
            background-color: #fff;
            display: flex;
            gap: 10px;
            align-items: center;
        }

        canvas {
            flex-grow: 1;
            display: block;
        }
    </style>
</head>

<body>
    <div id="controls">
        <label>Width (mm): <input id="width" type="number" value="500"></label>
        <label>Height (mm): <input id="height" type="number" value="300"></label>
        <label>Depth (mm): <input id="depth" type="number" value="50"></label>
        <button id="drawBtn">Draw Sign</button>
    </div>
    <canvas id="sceneCanvas"></canvas>

    <script type="module">
        import * as THREE from './node_modules/three/build/three.module.js';
        import { OrbitControls } from './node_modules/three/examples/jsm/controls/OrbitControls.js';

        const canvas = document.getElementById('sceneCanvas');
        const renderer = new THREE.WebGLRenderer({ canvas, antialias: true });

        renderer.setSize(window.innerWidth, window.innerHeight - document.getElementById('controls').clientHeight);

        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0xdddddd);

        const camera = new THREE.PerspectiveCamera(70, canvas.clientWidth / canvas.clientHeight, 0.1, 5000);
        camera.position.z = 800;

        const controls = new OrbitControls(camera, renderer.domElement);

        const ambientLight = new THREE.AmbientLight(0xffffff, 0.7);
        scene.add(ambientLight);

        const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
        directionalLight.position.set(5, 10, 7.5);
        scene.add(directionalLight);

        let signMesh;

        function createSign() {
            const width = parseFloat(document.getElementById('width').value);
            const height = parseFloat(document.getElementById('height').value);
            const depth = parseFloat(document.getElementById('depth').value);

            if (signMesh) {
                scene.remove(signMesh);
                signMesh.geometry.dispose();
                signMesh.material.dispose();
            }

            const geometry = new THREE.BoxGeometry(width, height, depth);
            const material = new THREE.MeshStandardMaterial({ color: 0x007bff });

            signMesh = new THREE.Mesh(geometry, material);
            scene.add(signMesh);

            camera.position.set(0, 0, Math.max(width, height, depth) * 2);
            controls.update();
        }

        document.getElementById('drawBtn').addEventListener('click', createSign);

        function animate() {
            requestAnimationFrame(animate);
            renderer.render(scene, camera);
        }

        window.addEventListener('resize', () => {
            const width = window.innerWidth;
            const height = window.innerHeight - document.getElementById('controls').clientHeight;

            camera.aspect = width / height;
            camera.updateProjectionMatrix();

            renderer.setSize(width, height);
        });

        createSign();
        animate();
    </script>
</body>

</html>